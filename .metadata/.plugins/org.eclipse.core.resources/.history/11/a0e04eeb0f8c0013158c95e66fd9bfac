package com.tvergilio.googleit;

import java.io.InputStream;
import java.net.HttpURLConnection;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;

import android.app.Activity;
import android.os.AsyncTask;

public class UpdateWordTask extends AsyncTask<String, Void, Word[]> {
	private static final String BASE_URL = "http://google.com/complete/search?output=toolbar&q=";
	private HttpURLConnection connection;
	private Activity activity;
	private Word[] words;

	public UpdateWordTask(Activity activity) {
		this.activity = activity;
	}

	@Override
	protected Word[] doInBackground(String... names) {
		try {
			int i = 0;
			for (String name : names) {
				HttpClient httpClient = GoogleSuggestManagerService
						.getHttpClient();
				String format = "xml";
				HttpGet request = new HttpGet(BASE_URL + name);
				HttpResponse response = httpClient.execute(request);
				InputStream data = response.getEntity().getContent();
				words[i] = XmlPullWordParser.parseWord(name, data);
				i++;
			}
			return words;

		} catch (Exception e) {
			e.printStackTrace();
			return null;
		}

	}

	@Override
	protected void onPostExecute(Word[] result) {
		// TODO Auto-generated method stub
		super.onPostExecute(result);
	}

}
